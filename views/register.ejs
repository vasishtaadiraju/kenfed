<!DOCTYPE html>
<html lang="en">
<!--begin::Head-->
<head>
	<meta charset="utf-8">
	<title>Register | KENFED</title>
	<meta content="Login page" name="description">
	<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><!--begin::Fonts-->
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet"><!--end::Fonts-->
	<!--begin::Page Custom Styles(used by this page)-->
	<link href="css/pages/login/login-2.css" rel="stylesheet" type="text/css"><!--end::Page Custom Styles-->
	<!--begin::Global Theme Styles(used by all pages)-->
	<link href="plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css">
	<link href="plugins/custom/prismjs/prismjs.bundle.css" rel="stylesheet" type="text/css">
	<link href="css/style.bundle.css" rel="stylesheet" type="text/css"><!--end::Global Theme Styles-->
	<!--begin::Layout Themes(used by all pages)-->
	<link href="css/themes/layout/header/base/light.css" rel="stylesheet" type="text/css">
	<link href="css/themes/layout/header/menu/light.css" rel="stylesheet" type="text/css">
	<link href="css/themes/layout/brand/dark.css" rel="stylesheet" type="text/css">
	<link href="css/themes/layout/aside/dark.css" rel="stylesheet" type="text/css"><!--end::Layout Themes-->
	<link href="media/logos/favicon.ico" rel="shortcut icon">
	
</head>
<!--end::Head-->
<!--begin::Body-->
<body class="header-fixed header-mobile-fixed subheader-enabled subheader-fixed aside-enabled aside-fixed aside-minimize-hoverable page-loading" id="kt_body">
	<!--begin::Main-->
	<div class="d-flex flex-column flex-root">
		<!--begin::Login-->
		<div class="login login-2 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white" id="kt_login">
			<!--begin::Aside-->
			<div class="login-aside order-2 order-lg-1 d-flex flex-row-auto position-relative overflow-hidden">
				<!--begin: Aside Container-->
				<div class="d-flex flex-column-fluid flex-column justify-content-between py-9 px-7 py-lg-13 px-lg-35">
					<!--begin::Logo-->
					 <a class="text-center pt-2" href="/"><img alt="" class="max-h-75px" src="assets/img/logo/logo1.png"></a> <!--end::Logo-->
					 <!--begin::Aside body-->
					<div class="d-flex flex-column-fluid flex-column flex-center">
						<!--begin::Signup-->
						<div class="login-form login-signin pt-11">
							<!--begin::Form-->
							<form class="form" name="kt_login_signup_form" id="kt_login_signup_form" novalidate="novalidate">
								<!--begin::Title-->
								<div class="text-center pb-8">
									<h2 class="font-weight-bolder text-dark font-size-h2 font-size-h1-lg">Sign Up</h2>
									<p class="text-muted font-weight-bold font-size-h4">Enter your details to create your account</p>
								</div><!--end::Title-->
								<!--begin::Form group-->
								<div class="form-group">
									<input autocomplete="off" class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6" name="firstname" id="firstname" placeholder="First Name" type="text">
								</div><!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group">
									<select class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6" id="surname">
									 <option selected="true" disabled="disabled">Select your Surname</option>
									 <!-- <option>Alugunuru (Gothram: PASUPATI)</option>
									 <option>Balaraju (Gothram: KASHYAPA)</option>
									 <option>Adduri (Gothram: VASISHTA)</option>
									 <option>Addala (Gothram: DHANUNJAYA)</option>
									 <option>Addepalli (Gothram: KAUNDINYA)</option> -->
									</select>
								</div>
								<!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group">
									<input autocomplete="off" class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6" name="email" id="email" placeholder="Email" type="email">
								</div><!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group">
									<input autocomplete="off" class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6" name="password" id="password" placeholder="Password" type="password">
								</div><!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group">
									<input autocomplete="off" class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6" name="cpassword" id="cpassword" placeholder="Confirm password" type="password">
								</div><!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group">
									<input autocomplete="off" class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6" name="mobilenumber" id="mobilenumber" placeholder="Mobile Number" type="number">
								</div><!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group">
									<input autocomplete="off" class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6" name="nameoforg" id="nameoforg" placeholder="Name of Organisation" type="text">
								</div><!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group">
									<input autocomplete="off" class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6" name="location" id="location" placeholder="Location - City or Town" type="text">
								</div><!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group">
									<label class="checkbox mb-0"><input name="agree" type="checkbox">I Agree the &nbsp;<a href="#">terms and conditions</a>. <span></span></label>
								</div><!--end::Form group-->
								<!--begin::Form group-->
								<div class="form-group d-flex flex-wrap flex-center pb-lg-0 pb-3">
									<button class="btn btn-primary font-weight-bolder font-size-h6 px-8 py-4 my-3 mx-4" id="kt_login_signup_submit" type="button">Register</button>
								</div><!--end::Form group-->
                                <p style="text-align: center;">Already have a account? &nbsp; <a class="text-primary font-weight-bolder" href="/login">Login</a></p>
							</form><!--end::Form-->
						</div><!--end::Signup-->


					</div><!--end::Aside body-->
					<!--begin: Aside footer for desktop-->
					<div class="text-center" style="display:none;">
						<button class="btn btn-light-primary font-weight-bolder px-8 py-4 my-3 font-size-h6" type="button"><span class="svg-icon svg-icon-md"><!--begin::Svg Icon | path:media/svg/social-icons/google.svg--><svg height="20" viewbox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg">
						<path d="M19.9895 10.1871C19.9895 9.36767 19.9214 8.76973 19.7742 8.14966H10.1992V11.848H15.8195C15.7062 12.7671 15.0943 14.1512 13.7346 15.0813L13.7155 15.2051L16.7429 17.4969L16.9527 17.5174C18.879 15.7789 19.9895 13.221 19.9895 10.1871Z" fill="#4285F4"></path>
						<path d="M10.1993 19.9313C12.9527 19.9313 15.2643 19.0454 16.9527 17.5174L13.7346 15.0813C12.8734 15.6682 11.7176 16.0779 10.1993 16.0779C7.50243 16.0779 5.21352 14.3395 4.39759 11.9366L4.27799 11.9466L1.13003 14.3273L1.08887 14.4391C2.76588 17.6945 6.21061 19.9313 10.1993 19.9313Z" fill="#34A853"></path>
						<path d="M4.39748 11.9366C4.18219 11.3166 4.05759 10.6521 4.05759 9.96565C4.05759 9.27909 4.18219 8.61473 4.38615 7.99466L4.38045 7.8626L1.19304 5.44366L1.08875 5.49214C0.397576 6.84305 0.000976562 8.36008 0.000976562 9.96565C0.000976562 11.5712 0.397576 13.0882 1.08875 14.4391L4.39748 11.9366Z" fill="#FBBC05"></path>
						<path d="M10.1993 3.85336C12.1142 3.85336 13.406 4.66168 14.1425 5.33717L17.0207 2.59107C15.253 0.985496 12.9527 0 10.1993 0C6.2106 0 2.76588 2.23672 1.08887 5.49214L4.38626 7.99466C5.21352 5.59183 7.50242 3.85336 10.1993 3.85336Z" fill="#EB4335"></path></svg><!--end::Svg Icon--></span> Sign in with Google</button>
					</div><!--end: Aside footer for desktop-->
				</div><!--end: Aside Container-->
			</div><!--begin::Aside-->
			<!--begin::Content-->
			<div class="content order-1 order-lg-2 d-flex flex-column w-100 pb-0" style="background-color: #B1DCED;">
				<!--begin::Title-->
				<div class="d-flex flex-column justify-content-center text-center pt-lg-40 pt-md-5 pt-sm-5 px-lg-0 pt-5 px-7">
					<h3 class="display4 font-weight-bolder my-7 text-dark" style="color: #986923;">Welcome to KENFED!</h3>
					<p class="font-weight-bolder font-size-h2-md font-size-lg text-dark opacity-70">All in one marketplace for all business<br>from Kshatriya Community</p>
				</div><!--end::Title-->
				<!--begin::Image-->
				<div class="content-img d-flex flex-row-fluid bgi-no-repeat bgi-position-y-bottom bgi-position-x-center" style="background-image: url(media/svg/illustrations/login-visual-2.svg);"></div><!--end::Image-->
			</div><!--end::Content-->
		</div><!--end::Login-->
	</div><!--end::Main-->
	 
	<script>
	           var KTAppSettings = {
	   "breakpoints": {
	       "sm": 576,
	       "md": 768,
	       "lg": 992,
	       "xl": 1200,
	       "xxl": 1400
	   },
	   "colors": {
	       "theme": {
	           "base": {
	               "white": "#ffffff",
	               "primary": "#3699FF",
	               "secondary": "#E5EAEE",
	               "success": "#1BC5BD",
	               "info": "#8950FC",
	               "warning": "#FFA800",
	               "danger": "#F64E60",
	               "light": "#E4E6EF",
	               "dark": "#181C32"
	           },
	           "light": {
	               "white": "#ffffff",
	               "primary": "#E1F0FF",
	               "secondary": "#EBEDF3",
	               "success": "#C9F7F5",
	               "info": "#EEE5FF",
	               "warning": "#FFF4DE",
	               "danger": "#FFE2E5",
	               "light": "#F3F6F9",
	               "dark": "#D6D6E0"
	           },
	           "inverse": {
	               "white": "#ffffff",
	               "primary": "#ffffff",
	               "secondary": "#3F4254",
	               "success": "#ffffff",
	               "info": "#ffffff",
	               "warning": "#ffffff",
	               "danger": "#ffffff",
	               "light": "#464E5F",
	               "dark": "#ffffff"
	           }
	       },
	       "gray": {
	           "gray-100": "#F3F6F9",
	           "gray-200": "#EBEDF3",
	           "gray-300": "#E4E6EF",
	           "gray-400": "#D1D3E0",
	           "gray-500": "#B5B5C3",
	           "gray-600": "#7E8299",
	           "gray-700": "#5E6278",
	           "gray-800": "#3F4254",
	           "gray-900": "#181C32"
	       }
	   },
	   "font-family": "Poppins"
	};
	</script> <!--end::Global Config-->
	 <!--begin::Global Theme Bundle(used by all pages)-->
	 
	<script src="plugins/global/plugins.bundle.js">
	</script> 
	<script src="plugins/custom/prismjs/prismjs.bundle.js">
	</script> 
	<script src="js/scripts.bundle.js">
	</script> <!--end::Global Theme Bundle-->
	 <!--begin::Page Scripts(used by this page)-->
	 
	<script src="js/pages/custom/login/login-general.js">
	</script> <!--end::Page Scripts-->
	<script>
		function getSurnames()
		{	
			console.log("get surnames");
			$.ajax({
              type: 'GET',
              dataType:"json",
              contentType: 'application/json',
              url: '/api/surname/list',
              success: function (data, status, xhr) {
                console.log('data: ', data);
                if(data.status=='success')
                {     
                  for(var i=0;i<data.list.length;i++)
                  {
                    // console.log(data.list[i]);                   
					$("#surname").append(new Option(data.list[i].name+"("+data.list[i].gothram+")",data.list[i].id));
                  }
                }					
              },
              error(){
                console.log('Error');
              }
            });


		}
		function validateForm(validationarr,idval)
		{
			for(var i=0;i<validationarr.length;i++)
			{
				var eleid=validationarr[i];
				var eleval=$("#"+eleid).val();
				console.log(eleid+" : "+eleval);
				if(eleid=="passmatch")
				{
					if($("#password").val()!=$("#cpassword").val())
					{
						swal.fire({
							text: "Password and Confirm password should match",
							icon: "error",
							buttonsStyling: false,
							confirmButtonText: "Ok",
							customClass: {
								confirmButton: "btn font-weight-bold btn-light-primary"
							}
						});
						return false;
					}
				}
				else
				{
					if(eleval==null || eleval=='')
					{
						swal.fire({
							text: "Please enter value for "+idval[eleid],
							icon: "error",
							buttonsStyling: false,
							confirmButtonText: "Ok",
							customClass: {
								confirmButton: "btn font-weight-bold btn-light-primary"
							}
						});
						return false;
					}
				}
				
			}
			
			return true;
		}
		$(document).ready(function() {
			getSurnames();
			$('#kt_login_signup_submit').on('click', function (e) {
				e.preventDefault();
				console.log("submit register form");
				var idval={"firstname":"First Name","surname":"Surname","email":"Email","password":"Password","cpassword":"Confirm Password","mobilenumber":"Mobile Number","nameoforg":"Name of Organisation","location":"Location"};
				var validationarr=["firstname","surname","email","password","cpassword","passmatch","mobilenumber","nameoforg","location"];
				var validate=validateForm(validationarr,idval);
				console.log("form validation  : "+validate);
				if(validate)
				{
					var postdata={};
					var formElements=document.getElementById("kt_login_signup_form").elements;   
					for (var i=0; i<formElements.length; i++)
					{			
						if(formElements[i].type!='checkbox' && formElements[i].type!='button')
						{
							console.log(formElements[i].type+" : "+formElements[i].id+" : "+formElements[i].value);
							postdata[formElements[i].id]=formElements[i].value;
						}
					}
					
					
					if(postdata.hasOwnProperty("email") && postdata["email"] != null && postdata["email"] != '' ) 
					{
						$.ajax({
							type: 'POST',
							data: JSON.stringify(postdata),
							dataType: 'json',
							contentType: 'application/json',
							url: '/api/user/create',
							success: function (data, status, xhr) {
								console.log('data: ', data);
								if(data.status=='success')
								{
									swal.fire({
										text: "Your registration is successful.Please login",
										icon: "success",
										buttonsStyling: false,
										confirmButtonText: "Ok",
										customClass: {
											confirmButton: "btn font-weight-bold btn-light-primary"
										}
									}).then(function() {
										location.replace("/login");
									});
								}
								else
								{
									swal.fire({
										text: "Something went wrong.Please try again later",
										icon: "error",
										buttonsStyling: false,
										confirmButtonText: "Ok",
										customClass: {
											confirmButton: "btn font-weight-bold btn-light-primary"
										}
									});
								}
								
							},
							error(){
								console.log('Error');
							}
						});
					}
				}
				
				
				
				
			});
		});
	</script>
	<!--end::Body-->
</body>
</html>